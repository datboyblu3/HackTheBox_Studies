### PrivEsc Checklists
- [HackTricks](https://book.hacktricks.xyz/welcome/readme)
- [Payload All The Things](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md)

### Enumeration Scripts

- **Linux**
	- [LinEnum](https://github.com/rebootuser/LinEnum)
	- [LinuxPrivChecker](https://github.com/sleventyeleven/linuxprivchecker)
- **Windows**
	- [Seatbelt](https://github.com/GhostPack/Seatbelt)
	- [JAWS](https://github.com/411Hall/JAWS)
- Servers
	- [PEASS](https://github.com/carlospolop/PEASS-ng)

### Kernel Exploits

- search for kernel exploits for machines running older OS versions
- use searchsploit to look for exploits for the specific kernel version
```
searchsploit 3.9.0-73-generic
```

### Vulnerable Software

Search for vulnerable software in linux
```
dpkg -l
```

Search for vulnerable software in Windows
```
C:\Program Files
```

### User Privileges
```
sudo -l
```

- Search for programs that allow you to execute programs with sudo privileges with/without passwords required
- GTFOBins and LOLBAS can help to leverage control

### Scheduled Tasks

A few ways to take advantage of scheduled tasks in Windows or cron jobs in Linux
	1) Add new scheduled tasks/cron jobs
	2) Trick them to execute a malicious software

In Linux verify if you have write permissions to either of the following:

- /etc/crontab
- /etc/cron.d
- /var/spool/cron/crontabs/root

### Exposed Credentials

Read History Files
- PSReadLine for Windows
- history for Linux



## Questions

**Question 1**
SSH into the server above with the provided credentials, and use the '-p xxxxxx' to specify the port shown above. Once you login, try to find a way to move to 'user2', to get the flag in '/home/user2/flag.txt'.

**Answer:**
On the machine execute *sudo -l*. You will see that you can execute /bin/bash with no password as user2.
```
sudo user2 /bin/bash 
```


**Question 2**
Once you gain access to 'user2', try to find a way to escalate your privileges to root, to get the flag in '/root/flag.txt'.

**Answer:**
Execute ls -la /root/.ssh to determine if the private key is readable. If so, copy it's contents into a file. Now SSH into root with the private key
```
ssh root@TARGET_IP -p TARGET_PORT -i COPIED_PRIVATE_KEY
```